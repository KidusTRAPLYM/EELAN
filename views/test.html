<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="/Images/ciphry.png" />
    <title>Ciphree — Share Your True Feelings, Connect, and Heal</title>
    <link rel="canonical" href="https://ciphree.com/" />
    <meta
      name="description"
      content="Ciphree is your emotional outlet. Share joy or pain anonymously and connect with others who understand. Real feelings. Real people."
    />

    <!-- Open Graph / Facebook -->
    <meta
      property="og:title"
      content="Ciphree — Share Your True Feelings, Connect, and Heal"
    />
    <meta
      property="og:description"
      content="Ciphree is your emotional outlet. Share joy or pain anonymously and connect with others who understand. Real feelings. Real people."
    />
    <meta property="og:url" content="https://ciphree.com/" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://ciphree.com/Images/ciphry.png" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="Ciphree — Share Your True Feelings, Connect, and Heal"
    />
    <meta
      name="twitter:description"
      content="Ciphree is your emotional outlet. Share joy or pain anonymously and connect with others who understand. Real feelings. Real people."
    />
    <meta
      name="twitter:image"
      content="https://ciphree.com/Images/ciphry.png"
    />

    <!-- Fonts and Tailwind -->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: { fontFamily: { poppins: ["Poppins", "sans-serif"] } },
        },
      };
    </script>

    <!-- Cloudflare Turnstile -->
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MM8VSWME23"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-MM8VSWME23');
    </script>
  </head>

  <body class="font-poppins h-screen flex flex-col justify-center items-center relative bg-gray-100">
    <!-- Section 1 -->
    <section
      id="section1"
      class="active container border p-10 w-full max-w-lg rounded-lg text-center bg-white z-10"
    >
      <h1 class="text-[clamp(21px,5vw,36px)] font-bold mb-4 text-blue-500">
        Step Into Your Emotional Haven
      </h1>
      <h2 class="text-[clamp(18px,4vw,28px)] font-bold mb-4 text-blue-500">
        Hello there!
      </h2>
      <p class="mb-2 text-[clamp(12px,2.5vw,16px)]">
        We all carry feelings that can feel too heavy to share. Ciphree is your
        safe space to be understood. Journaling, AI chats, and connecting with
        people who get you, all in one place.
      </p>
      <p class="mb-4 font-semibold text-[clamp(14px,2.5vw,18px)]">
        Are you ready to explore?
      </p>
      <div class="flex justify-center items-center gap-2">
        <a href="/morerror">
          <button
            id="nahBtn1"
            class="bg-gray-300 hover:bg-gray-400 px-3 py-2 rounded text-[clamp(12px,2vw,16px)]"
          >
            Nah I am good
          </button>
        </a>

        <button
          id="yesBtn1"
          class="bg-blue-600 text-white hover:bg-blue-700 px-3 py-2 rounded text-[clamp(12px,2vw,16px)]"
        >
          Hell yeah!
        </button>
      </div>
    </section>

    <!-- Section 2: Signup Form -->
    <section id="section2" class="container border p-10 w-full max-w-lg rounded-lg gap-4 bg-white z-10">
      <h2 class="text-2xl font-bold mb-4 text-blue-500">So let’s get started</h2>
      
      <form action="/register" method="post" class="flex flex-col justify-center items-center gap-4 w-full max-w-lg mx-auto" id="registerForm">
        <p class="mb-2">What shall we call you?</p>
        <input type="text" name="name" id="name" placeholder="Name" maxlength="8" class="w-full border focus:outline-blue-500 p-4" />
        <p id="nameError" class="w-full text-left text-red-500 text-sm mt-1 hidden">Name is either taken or contains spaces.</p>
        
        <input type="password" name="password" id="password" placeholder="Password" class="w-full border focus:outline-blue-500 p-4" minlength="8" maxlength="16" />
        <input type="text" name="passwordHint" id="passwordHint" placeholder="Password Hint" class="w-full border focus:outline-blue-500 p-4" />
        <p class="text-red-500 text-sm">Once you set up your account, you can't change your password and password hint anytime.</p>
        <!-- Cloudflare Turnstile widget -->
        <div class="cf-turnstile" data-sitekey="0x4AAAAAABucgCimXpQ-F1Yl" data-callback="turnstileCallback"></div>
        
        <!-- Hidden input for Turnstile response -->
        <input type="hidden" name="cf-turnstile-response" id="cf-turnstile-response" />
    
        <div class="flex flex-wrap w-full justify-center items-center gap-2 mt-2">
          <button type="submit" id="signupBtn" class="bg-blue-600 text-white hover:bg-blue-700 px-6 py-2 rounded">Sign-up</button>
         
        </div>
      </form>
    </section>
    <!-- Section 3: Choose Avatar -->


    <!-- Turnstile script -->

    

    <!-- Exit Popup -->
    <div
      id="exitPopup"
      class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden"
    >
      <div class="bg-white text-black p-6 rounded-xl max-w-md w-full shadow-lg text-center space-y-4">
        <h2 class="text-xl font-bold">Wait! Before you go...</h2>
        <p>Could you share a quick thought about your experience on Ciphree?</p>
        <form action="/feedback" method="post">
          <textarea class="w-full border border-gray-300 rounded p-2" rows="3" placeholder="Type here..." name="message"></textarea>
          <div class="flex justify-end gap-4 mt-2">
            <button type="button" onclick="closePopup()" class="bg-gray-200 px-4 py-2 rounded">Close</button>
            <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded">Send</button>
          </div>
        </form>
      </div>
    </div>

    <script>
      const section1 = document.getElementById("section1");
      const section2 = document.getElementById("section2");
      const section3 = document.getElementById("section3");
      const exitPopup = document.getElementById("exitPopup");
      const form = section2.querySelector("form");
      const nameInput = document.getElementById("name");
      const nameError = document.getElementById("nameError");
      const signupBtn = document.getElementById("signupBtn");

      document.getElementById("yesBtn1").addEventListener("click", () => {
  section1.classList.remove("active");
  section2.classList.add("active");
});



      function closePopup() {
        exitPopup.classList.remove("show");
      }

      async function checkName(name) {
        if (!name) return false;
        const res = await fetch(`/check-name?name=${encodeURIComponent(name)}`);
        const data = await res.json();
        return data.exists;
      }
      async function validateName() {
        const value = nameInput.value.trim();
        const hasSpace = value.includes(" ");
        const exists = await checkName(value);
        if (!value || hasSpace || exists) {
          nameInput.style.borderColor = "red";
          nameError.classList.remove("hidden");
          signupBtn.disabled = true;
          return false;
        } else {
          nameInput.style.borderColor = "";
          nameError.classList.add("hidden");
          signupBtn.disabled = false;
          return true;
        }
      }
      nameInput.addEventListener("input", validateName);
      
      // Turnstile callback function
     
    </script>

    <style>
      body {
        position: relative;
        min-height: 100vh;
        background: url(/Images/background.png) center center / cover no-repeat fixed;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0 1rem;
        overflow: hidden;
        perspective: 1500px;
      }
      body::before {
        content: "";
        position: absolute;
        inset: 0;
        background: rgba(40, 101, 234, 0.612);
        mix-blend-mode: multiply;
        backdrop-filter: blur(6px);
        z-index: 0;
      }
      section {
        position: relative;
        z-index: 1;
        display: none;
        margin-top: 2rem;
        text-align: center;
      }
      section.active {
        display: block;
      }
      /* Turnstile responsive wrapper */
.cf-turnstile {
  position: relative;
  width: 100%;
  max-width: 454px;
  height: 78px; /* default widget height */
  transform-origin: top left;
}

/* Scale the widget on smaller screens */
@media (max-width: 500px) {
  .cf-turnstile {
    transform: scale(0.85); /* adjust as needed */
    height: 66px; /* scaled height = 78 * 0.85 */
  }
}

@media (max-width: 400px) {
  .cf-turnstile {
    transform: scale(0.7); /* adjust smaller screens */
    height: 55px; /* scaled height = 78 * 0.7 */
  }
}

      #exitPopup { display: none; }
      #exitPopup.show { display: flex; }
      input { padding: 0.5rem; font-size: 1rem; border: 1px solid #ccc; border-radius: 0.3rem; width: 100%; }
      button { padding: 0.8rem 1.5rem; cursor: pointer; font-size: 1rem; border-radius: 0.3rem; }
    </style>
  </body>
</html>
