<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Monami Chat</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/CSS/variables.css" />
    <link rel="stylesheet" href="/CSS/main.css" />
   <link rel="stylesheet" href="/CSS/post.css">
      <link rel="icon" href="/Images/ciphry.png">
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Poppins", sans-serif;
      }
      .neon-glow {
        box-shadow: 0 0 10px rgba(59, 130, 246, 0.6),
          0 0 20px rgba(59, 130, 246, 0.4), 0 0 30px rgba(59, 130, 246, 0.2);
      }
      #typing-area {
    position: fixed;
    bottom: 0%;
    display: flex;
    width: 100%;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    background: var(--White--);
   
}
section#chat-window {
    padding-bottom: 20%;
}
section#chatW {
    display: flex
;
    justify-content: center;
    align-items: center;
}
      textarea {
        min-height: 40px;
        max-height: 200px;
        overflow-y: auto;
      }
      .message.user {
        justify-content: flex-end;
      }
      .message.ai {
        justify-content: flex-start;
      }
      .back {
    background: var(--Black--);
    color: var(--White--);
    padding: 10px;
    width: 40px;
    height: 40px;
    border-radius: 100px;
    display: flex;
    overflow: hidden;
    justify-content: center;
    align-items: center;
  }
    .back:hover{
    border: 1px solid var(--Black--);
    width: 200px;
    transition: 0.1s ease-in;
    }
    #back-btn{
      z-index: 9999;
      position: absolute;
      top: 10%;
      left: 8%;
    }
    .back-span{
      display: none;
    }
    .back:hover .back-span{
      display: block;
    }
    </style>
  </head>
  <body class="bg-gray-900">
    
    <div class="themeToggle">
      <button id="themeToggle" class="toggle">
        <span class="switch"></span>
      </button>
    </div>
    <a href="/">
    <div id="back-btn">
      <button class="back"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left-icon lucide-chevron-left"><path d="m15 18-6-6 6-6"/></svg><span class="back-span">Back to home</span></button>
    </div>
    </a>
   
    <!-- Logo -->
    <div class="text-3xl font-bold flex justify-center items-center text-blue-500 py-4 drop-shadow-[0_0_15px_rgba(59,130,246,0.8)]">
      Monami
    </div>

    <!-- Chat Window -->
     <section id="chatW">
      <section id="chat-window" class="flex justify-center flex-col items-center max-w-2xl w-full">

    
        <div id="chat" class="flex flex-col w-full flex-1 overflow-y-auto p-4 space-y-4 pb-10">
          <% chatHistory.forEach(c => { %>
            <div class="flex <%= c.user.toLowerCase() === 'user' ? 'justify-end' : 'justify-start' %>">
              <div class="<%= c.user.toLowerCase() === 'user' ? 'bg-blue-500' : 'bg-gray-800' %> text-white p-3 rounded-2xl max-w-md shadow-lg">
                <%= c.text %>
              </div>
            </div>
          <% }) %>
        </div>
         <section id="typing-area" class="fixed botto-4">
          <form id="listenForm" action="/monami/listen" method="POST" class="w-full max-w-2xl p-4">
            <div class="flex items-end gap-2 bg-gray-800 p-3 rounded-2xl neon-glow">
              <textarea
                id="message"
                name="text"
                rows="1"
                placeholder="Type your feelings here..."
                class="flex-1 bg-transparent text-white resize-none outline-none p-2 max-w-xl"
                required
              ></textarea>
              <button
                type="submit"
                class="px-4 py-2 bg-blue-500 text-white rounded-xl shadow-lg hover:bg-blue-600 transition"
              >
                Send
              </button>
            </div>
          </form>
      
          <form id="responseForm" action="/monami/respond" method="POST" class="w-full max-w-2xl p-4">
            <button
              type="submit"
              class="w-full px-4 py-2 bg-green-500 text-white rounded-xl shadow-lg hover:bg-green-600 transition"
            >
              /response
            </button>
          </form>
      
          <!-- Scroll to Bottom Button -->
          <button
            id="scroll-btn"
            class="fixed bottom-13 left-1/2 -translate-x-1/2 bg-blue-500 text-white p-3 rounded-full shadow-lg hidden hover:bg-blue-600 transition w-12 h-12"
          >
            ‚¨á
         </section>
        <!-- Input Area -->
       
        </button>
      </section>
     </section>
    
    <script>
      const chat = document.getElementById("chat");
      const textarea = document.getElementById("message");
      const scrollBtn = document.getElementById("scroll-btn");

      // Auto expand textarea
      textarea.addEventListener("input", () => {
        textarea.style.height = "auto";
        textarea.style.height = textarea.scrollHeight + "px";
      });

      // Show/hide scroll button
      chat.addEventListener("scroll", () => {
        if (chat.scrollTop + chat.clientHeight < chat.scrollHeight - 50) {
          scrollBtn.classList.remove("hidden");
        } else {
          scrollBtn.classList.add("hidden");
        }
      });

      // Scroll to bottom when clicked
      scrollBtn.addEventListener("click", () => {
        chat.scrollTo({ top: chat.scrollHeight, behavior: "smooth" });
        scrollBtn.classList.add("hidden");
      });

      // Scroll to bottom on page load
      chat.scrollTop = chat.scrollHeight;
    </script>
  </body>
</html>
<script>
  const themeToggle = document.getElementById("themeToggle");
 const themeIcon = themeToggle.querySelector("span");
 
 // Load saved theme on page load
 const savedTheme = localStorage.getItem("theme");
 if (savedTheme) {
     document.documentElement.setAttribute("data-theme", savedTheme);
     themeIcon.textContent = savedTheme === "dark" ? "‚òÄÔ∏è" : "üåô";
 }
 
 // Toggle function
 themeToggle.addEventListener("click", () => {
     const currentTheme = document.documentElement.getAttribute("data-theme");
     const newTheme = currentTheme === "dark" ? "light" : "dark";
     document.documentElement.setAttribute("data-theme", newTheme);
     localStorage.setItem("theme", newTheme); // Save theme for all pages
     themeIcon.textContent = newTheme === "dark" ? "‚òÄÔ∏è" : "üåô";
 });
 
   
   </script>
   <style>
     body{
       background-color: var(--White--);
     }
     .themeToggle {
   display: flex;
   align-items: center;
   justify-content: flex-end !important;
   padding: 10px;
 }
 
 #themeToggle {
   width: 60px;
   height: 30px;
   border-radius: 30px;
   border: 1px solid var(--Black--) !important;
   background-color: var(--White--);
   position: relative;
   cursor: pointer;
   transition: background-color 0.3s ease;
 }
 
 #themeToggle .switch {
   position: absolute;
   top: 3px;
   left: 3px;
   width: 24px;
   height: 24px;
   background-color: var(--White--);
   border-radius: 50%;
   transition: transform 0.3s ease;
 }
 
 [data-theme="dark"] #themeToggle {
   background-color: var(--Blue--);
 }
 
 [data-theme="dark"] #themeToggle .switch {
   transform: translateX(30px);
 }
 
 
   
   </style>
   <script src="/Js/post.js" defer></script>
   