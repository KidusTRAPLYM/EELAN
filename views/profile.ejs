<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profile</title>
    <link rel="stylesheet" href="/CSS/variables.css" />
    <link rel="stylesheet" href="/CSS/main.css">
    <link rel="stylesheet" href="/CSS/dashboard.css">
    <link rel="stylesheet" href="/CSS/post.css">
    <link rel="stylesheet" href="/CSS/profile.css">
      <link rel="icon" href="/Images/ciphry.png">
    <!--FONT FAMILY-->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
     <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  </head>
  <body>
   
    <div id="loader" class="loader"> 
  <div class="dot"></div>
  <div class="dot"></div>
  <div class="dot"></div>
</div>
<script>
  window.addEventListener("load", function () {
    const loader = document.getElementById("loader");
    loader.style.opacity = 0; // fade out
    setTimeout(() => {
      loader.style.display = "none"; // remove from DOM flow
    }, 400); // match with CSS transition
  });
</script>


  <nav id="slide-bar">
      <ul>
        <li>
          <a href="/landing">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="size-6"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"
              />
            </svg>

            <span>Home</span>
          </a>
        </li>
        <li>
          <a href="/search">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="size-6"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"
              />
            </svg>

            <span>Search</span>
          </a>
        </li>
        <li>
          <a href="#formPost">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="size-6"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M12 4.5v15m7.5-7.5h-15"
              />
            </svg>

            <span>Post</span>
          </a>
        </li>
        <li>
          <a href="/monami">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="size-6"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.068.157 2.148.279 3.238.364.466.037.893.281 1.153.671L12 21l2.652-3.978c.26-.39.687-.634 1.153-.67 1.09-.086 2.17-.208 3.238-.365 1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"
              />
            </svg>

            <span>Monami</span>
          </a>
        </li>
        <li>
          <a href="/profile">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="size-6"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"
              />
            </svg>

            <span>Profile</span>
          </a>
        </li>
        <li>
          <a href="/journal">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="size-6"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"
              />
            </svg>

            <span>Journal</span>
          </a>
        </li>
        <li>
          <a href="/feed">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="size-6"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 0 1-2.25 2.25M16.5 7.5V18a2.25 2.25 0 0 0 2.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 0 0 2.25 2.25h13.5M6 7.5h3v3H6v-3Z"
              />
            </svg>

            <span>Feed</span>
          </a>
        </li>
      </ul>
    </nav>
 <main class="body">
  <section id="logo">
        <h1>Ciphree</h1>
      </section>
   <section id="body">
   
    <section id="profile-details">
  <div class="profilepic"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
  <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
</svg>
</div>

  <div class="engagements">
    <h1><%= user.name %></h1>
  </div>

  <div class="actions">
    <form action="/signout" method="post" id="signout">
      <button type="submit">Sign out</button>
    </form>
  </div>
  

</section>

                        <hr>
                       <div class="chooser">
                        <span class="tab active" data-target="post">Posts</span>
                        <span class="tab" data-target="journal">Journals</span>
                        <span class="tab" data-target="replies">Replies</span>
                      </div>

                  
                        <section id="container">
                        <section id="posts-list" class="post">
   <%posts.forEach(post=>{%>
                            <section id="post">
                              <section id="upper">
                                <section id="left">
                                  <div class="account"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
  <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
</svg>
</div>
                                  <div class="time">
                                    <span><span><%= user?.name || 'Unknown User' %></span>
                                  </span>
                                  <span><%= post.timeago || 'N/A' %></span>
                      
                                  </div>
                                </section>
                            
                              </section>
                              <section id="down">
                                <section id="text">
                                  <p><%= post.message %></p>
                                </section>
                                <section id="engagements">
                                  <div class="like">
                                    <form action="/comments/<%= post._id%>/like" method="post">
                                    <button type="submit" id="like">
                                             <img src="/Images/like.png" alt="">
                                      
                                    </button>
                                  </form>
                                  <span><%= post.like%></span>
                                  </div>
                                  <div class="dislike">
                                    <form action="/comments/<%= post._id%>/dislike" method="post">
                                    <button type="submit" id="like">
                                      <img src="/Images/dislike.png" alt="">
                                      
                                    </button>
                                    </form>
                                 <div class="span">
                                  <span> <%= post.dislike%></span>
                                 </div>
                                  </div>
                                
                                    
                                  
                                  <div class="comment">
                                    <a href="/comments/<%=post._id%>">
                                    <button id="comment-<%=post._id%>" class="comment-btn">
                                      <img src="/Images/comment.png" alt="">         
                                    </button>           
                                  </a>   
                                  </div>
                                  
                              
                                </section>
                              </section>
                            </section>
                          <%})%>
                        </section>
                          <section id="posts-list" class="journal" style="display: none;">
    <%fetchJournal.forEach(journal=>{%>
                            <section id="post">
                              <section id="upper">
                                <section id="left">
                                  <div class="time">
                                    <span><span><%= journal.name%></span>
                                  </span>
                                  <span><%= journal.date%></span>
                      
                                  </div>
                                </section>
                            
                              </section>
                              <section id="down">
                                <section id="text">
                                  <p><%= journal.message %></p>
                                </section>
                            
                              </section>
                            </section>
                          <%})%>
                        </section>
                            <section id="posts-list" class="replies" style="display: none;">

    <%comments.forEach(comment=>{%>
                              <section id="post-<%= comment._id %>" data-comment-id="<%= comment._id %>">

                            <section id="post">
                              <section id="down">
                                <section id="text" style="display: flex;align-items: center;gap: 20px;">
                                   <div class="account"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                                  <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                                </svg>
                                </div>
                                  <p><%= comment.message%></p>
                                  <a href="/comments/<%= comment.postId %>">
  <button class="comment-btn" style="width: 93px;">Comments</button>
</a>

                                </section>
                            
                              </section>
                            </section>
                          <%})%>
                        </section>
                                                  
                        </section>
                        </section>
        </section>

 
      </section>

    </section>
                        </section>
    </section>
    </section>
         <section id="formPost">
        <form action="/post" method="Post" class="formPost">
          <div class="up">
            <h1>Create a post</h1>
          </div>
          <div class="down">
            <textarea
              name="message"
              id="monami-input"
              maxlength="500"
              placeholder="Write your post here."
            ></textarea>
            <span>  <p id="char-count">0 / 500</p></span>
          
            <!-- Character counter display -->
          <input list="post-types" name="type" placeholder="Choose the post type" />
<datalist id="post-types">
  <option value="Articles">
  <option value="Posts">
</datalist>
<div class="btns">
     <button>Post</button>
    <a href="#"><button class="cancel" type="button">Cancel</button></a>
</div>

        </form>
      </section>
    <script>
  const textarea = document.getElementById("monami-input");
  const charCount = document.getElementById("char-count");
  const typeInput = document.querySelector('input[name="type"]');

  // Initial character counter
  textarea.addEventListener("input", () => {
    charCount.textContent = textarea.maxLength
      ? `${textarea.value.length} / ${textarea.maxLength}`
      : `${textarea.value.length} characters`;
  });

  // Change maxlength based on post type
  typeInput.addEventListener("input", () => {
    if (typeInput.value === "Articles") {
      textarea.removeAttribute("maxlength");
    } else {
      textarea.setAttribute("maxlength", "500");
      if (textarea.value.length > 500) {
        textarea.value = textarea.value.slice(0, 500); // trim it instantly
      }
    }

    // Force update count when switching type
    charCount.textContent = textarea.maxLength
      ? `${textarea.value.length} / ${textarea.maxLength}`
      : `${textarea.value.length} characters`;
  });
</script>
<script>
  const allowed = ["Articles", "Posts"];
  typeInput.addEventListener("input", () => {
    if (!allowed.includes(typeInput.value)) {
      typeInput.setCustomValidity("Choose one of the allowed post types.");
    } else {
      typeInput.setCustomValidity("");
    }
  });
</script>
   <script>
 document.addEventListener("DOMContentLoaded", () => {
  const tabs = document.querySelectorAll(".chooser .tab");
  const sections = {
    post: document.querySelector(".post"),
    journal: document.querySelector(".journal"),
    replies: document.querySelector(".replies"),
  };

  tabs.forEach(tab => {
    tab.addEventListener("click", () => {
      tabs.forEach(t => t.classList.remove("active"));
      tab.classList.add("active");

      const target = tab.getAttribute("data-target"); // e.g. "post", "journal", "replies"

      Object.entries(sections).forEach(([key, section]) => {
        section.style.display = (key === target) ? "block" : "none";
      });
    });
  });
});


</script>
<script>
 document.addEventListener("DOMContentLoaded", () => {
  const tabs = document.querySelectorAll(".chooser .tab");
  const sections = {
    post: document.querySelector(".post"),
    journal: document.querySelector(".journal"),
    replies: document.querySelector(".replies"),
  };

  tabs.forEach(tab => {
    tab.addEventListener("click", () => {
      tabs.forEach(t => t.classList.remove("active"));
      tab.classList.add("active");

      const target = tab.getAttribute("data-target");

      // Show the target section & hide others
      Object.entries(sections).forEach(([key, section]) => {
        if (section) {
          section.style.display = (key === target) ? "block" : "none";
        }
      });
    });
  });
});

</script>
<style>
.chooser span {
  cursor: pointer;
  padding: 10px 20px;
  font-weight: 400;
  color: #666;
}

.chooser span.active {
  font-weight: 700;
  border-bottom: 2px solid var(--Blue--); /* or any highlight color */
  color: var(--Blue--);
}
</style>
</script>
 </main>
    <script src="/js/loading2.js"></script>
    </body>
</html>
